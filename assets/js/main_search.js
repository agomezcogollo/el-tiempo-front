function SearchSkillsLoad(){let e="Bearer "+sessionStorage.getItem("tokenweb");fetch("http://127.0.0.1:8000/api/skills",{headers:{Accept:"application/json",Authorization:e},method:"GET"}).then(e=>e.json()).then(e=>{e.data?(selectV=document.querySelector("#selectpickerSkill"),e.data.forEach(function(t,o,l){let n=document.createElement("option");n.value=e.data[o].id,n.innerHTML=t.skill,selectV.appendChild(n),$('option[value="'+e.data[o].id+'"]').attr("data-subtext",t.title_profession)}),$(".selectpicker").selectpicker("refresh")):document.querySelector("#userSystem").innerText="Error insesperado"}).catch(e=>console.log(e))}function LoadSkillsdb(){let e=new FormData;e.append("emialUser",sessionStorage.getItem("emial"));let t="Bearer "+sessionStorage.getItem("tokenweb");fetch("http://127.0.0.1:8000/api/showSkill",{headers:{Accept:"application/json",Authorization:t},method:"POST",body:e}).then(e=>e.json()).then(e=>{dataSkillsArrayC=Object.values(e.dataSkills),dataSkillsArrayK=Object.keys(e.dataSkills),e.dataSkills?null==e.dataSkills.length&&(document.querySelector("#infoAlertSkkilListDel")&&document.querySelector("#infoAlertSkkilListDel").remove(),dataSkillsArrayC.forEach(function(e,t,o){let l=document.querySelector("#listSaveSkills"),n=document.createElement("li");n.innerHTML=e,n.className="list-group-item",n.setAttribute("id","dbSe_"+dataSkillsArrayK[t]),l.appendChild(n)})):document.querySelector("#userSystem").innerText="Error insesperado"}).catch(e=>console.log(e))}function SaveDBSkillsUpdate(){if(document.querySelector("#listSaveSkills").childElementCount>=1&&null==document.querySelector("#infoAlertSkkilListDel")){document.querySelector("#alertNoneSklli").style="display: none;";let e=document.querySelector("#listSaveSkills").childElementCount;const t=[];for(let o=0;o<e;o++)t.push(document.querySelector("#listSaveSkills").children[o].id);let o="Bearer "+sessionStorage.getItem("tokenweb"),l=new FormData;l.append("_method","PUT"),l.append("dataListSkill","PUT"),l.append("dataSkill",t),l.append("emialUser",sessionStorage.getItem("emial")),fetch("http://127.0.0.1:8000/api/skills/1",{headers:{Accept:"application/json",Authorization:o},method:"POST",body:l}).then(e=>e.json()).then(e=>{console.log(e)}).catch(e=>console.log(e))}else document.querySelector("#alertNoneSklli").style=""}function AuthUsercheck(e){fetch("http://127.0.0.1:8000/api/user",{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+e},method:"POST"}).then(e=>e.json()).then(e=>{e.error?window.location.href="index.html":document.querySelector("#userSystem").innerText=e.user.name}).catch(e=>errorSession())}function errorSession(){sessionStorage.removeItem("tokenweb"),sessionStorage.removeItem("emial"),window.location.href="index.html"}function logoutSystem(){sessionStorage.removeItem("tokenweb"),sessionStorage.removeItem("emial"),window.location.href="index.html"}window.onload=function(){document.querySelector("#logoutSystem").addEventListener("click",logoutSystem,!1),document.querySelector("#addSkillsDB").addEventListener("click",SaveDBSkillsUpdate,!1),sessionStorage.getItem("tokenweb")||sessionStorage.getItem("emial")?AuthUsercheck(sessionStorage.getItem("tokenweb")):window.location.href="index.html",SearchSkillsLoad();let e=document.querySelector("#selectpickerSkill");e.onchange=function(){if(document.querySelector("#listSaveSkills").childElementCount<10){let t=e.options[e.selectedIndex].text,o=document.querySelector("#listSaveSkills"),l=document.createElement("li");l.innerHTML=t,l.className="list-group-item",l.setAttribute("id","dbSe_"+e.value),o.appendChild(l),document.querySelector("#infoAlertSkkilListDel")&&document.querySelector("#infoAlertSkkilListDel").remove()}else document.querySelector("#alertMaxSklli").style=""},LoadSkillsdb()};